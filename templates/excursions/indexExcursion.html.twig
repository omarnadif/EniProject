{% extends "base.html.twig" %}

{% block title %}{{ parent() }} Creer Sortie {% endblock %}

{% block main %}
    {# --- Barre de recherche --- #}
<form class="navbar-form form-control-sm" action="{{ path('indexLieu') }}" method="post">
    <div class="input-group search-box mb-4">
        <h6 class="text-justify mt-2 mr-3">Le nom contient: </h6>
        <span class="input-group-addon"><i class="material-icons">&#xE8B6;</i></span>
        <label for="search"></label><input name="searchTerm" type="text" id="search" class="form-control" placeholder="">
    </div>
</form>
{# --- FIN Barre de recherche --- #}

    {# --- Corps de l'index LIEU --- #}
<div class="table-responsive">

    <table class=" text-center table table-bordered border-primary">
        <thead>
        <tr>
            <th style="width: 22%;">image de  la sortie</th>
            <th style="width: 22%;">nom de la sortie</th>
            <th style="width: 22%;">Date de la sortie</th>
            <th style="width: 22%;">Cloture</th>
            <th style="width: 22%;">inscrits/places</th>
            <th style="width: 22%;">Etat</th>
            <th style="width: 22%;">Inscrit</th>
            <th style="width: 22%;">Organisateur</th>
            <th style="width: 22%;">Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for lieux in lieu %}
            <tr>
                <td>{# Affichage de l'image du lieu ou de l'image par défaut #}
                    {% if lieux.lieuImageUpload %}
                        {% set imagePath = asset('img/lieu/lieuUserUploadPicture/' ~ lieux.lieuImageUpload) %}
                    {% else %}
                        {% set imagePath = asset('img/lieu/lieuNoPictureImg/imgLieuDefault.png') %}
                    {% endif %}
                    <img src="{{ imagePath }}" alt="{{ lieux.nom }}" width="150">
                </td>
                <td>
                    {% for sorties in sortie %}
                        {% if sorties.lieu == lieux %}
                            {{ sorties.nom }}
                        {% endif %}
                    {% endfor %}
                </td>
                <td>
                    {% for sorties in sortie %}
                        {% if sorties.lieu == lieux %}
                            {{ sorties.dateHeureDebut|date('Y-m-d H:i:s') }}
                        {% endif %}
                    {% endfor %}
                </td>
                <td>
                    {% for sorties in sortie %}
                        {% if sorties.lieu == lieux %}
                            {{ sorties.dateLimiteInscription|date('Y-m-d H:i:s') }}
                        {% endif %}
                    {% endfor %}
                </td>
                <td>
                    {% for sorties in sortie %}
                        {% if sorties.lieu == lieux %}
                            {{ sorties.nbInscriptionsMax }}
                        {% endif %}
                    {% endfor %}
                </td>
                <td>
                    {% for sorties in sortie %}
                        {% if sorties.lieu == lieux %}
                            {{ sorties.etat.getLibelle() }}
                        {% endif %}
                    {% endfor %}
                </td>
                {# {% for participant in sortie.inscriptions %}
            <td>{{ participant.participantsInscrit.nom|upper }} {{ participant.participantsInscrit.prenom|upper }}</td>
        {% endfor %}
        <td>{{ sortie.getParticipantOrganise() }}</td>
        <td>
            {#<a href="{{ path('updateExcursion', {'id': sortie.id}) }}" class="btn btn-outline-success btn-sm">Modifier</a>
             <a href="{{ path('', {'id': lieu.id}) }}" class="btn btn-outline-danger btn-sm" onclick="return confirm('Êtes-vous sûr de vouloir supprimer votre compte ? Cette action est irréversible.')" >Supprimer</a>
                #}
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <a href="{{ path('createExcursion') }}" class="btn btn-info ml-5">Ajouter</a>
</div>
{% endblock %}
